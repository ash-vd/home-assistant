- alias: Wakeup - Bedroom
  trigger:
    platform: template
    value_template: "{{ states('sensor.time') == (((states.input_datetime.wakeup_time.attributes.timestamp | int) - 1800 ) | timestamp_custom('%H:%M', False)) }}"
  condition:
    - condition: state
      entity_id: input_boolean.wakeup_enabled
      state: "on"
    - condition: or
      conditions:
        - condition: state
          entity_id: input_boolean.wakeup_weekend
          state: "on"
        - condition: time
          weekday:
            - mon
            - tue
            - wed
            - thu
            - fri
  action:
    - service: script.turn_on
      entity_id: script.bedroom_wakeup
